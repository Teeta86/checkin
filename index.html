<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Thanksgiving Family Check In</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, #ffa559, #ff8f3c, #ffc46b, #ffd48b);
      background-size: cover;
      color: #333;
    }

    h1 {
      font-family: 'Pacifico', cursive;
      text-align: center;
      font-size: 40px;
      margin-bottom: 30px;
      color: #5a2c00;
      text-shadow: 1px 1px 2px white;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: rgba(255, 255, 255, 0.8);
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }

    .person {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px;
      margin: 8px 0;
      background: white;
      border-radius: 8px;
      border: 1px solid #ddd;
    }

    button {
      padding: 8px 14px;
      background-color: #ff7b2e;
      border: none;
      border-radius: 8px;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }

    button:hover {
      background-color: #ff6a10;
    }

    .status {
      font-weight: bold;
      color: #5a2c00;
      margin-right: 10px;
    }

    a {
      color: #0077cc;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

<h1>Thanksgiving Family Check In</h1>

<div class="container">
  <h2>Locations</h2>
  <ul>
    <li><strong>Park</strong></li>
    <li><strong>Sunny's</strong> — <a target="_blank" href="https://maps.google.com/?q=110 NW 2nd St #106, Bentonville, AR 72712">110 NW 2nd St #106, Bentonville, AR 72712</a></li>
    <li><strong>Crystal Bridges</strong> — <a target="_blank" href="https://maps.google.com/?q=600 Museum Way, Bentonville, AR 72712">600 Museum Way, Bentonville, AR 72712</a></li>
    <li><strong>House 1830</strong> — <a target="_blank" href="https://maps.google.com/?q=106 W Elm St #102, Rogers, AR 72756">106 W Elm St #102, Rogers, AR 72756</a></li>
    <li><strong>Downtown Fayetteville</strong></li>
  </ul>

  <h2>Family Check In</h2>
  <div id="peopleList"></div>
</div>

<!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCMEIkhJzi3IYMpi29z4kOM9rvTx5vFIoc",
    authDomain: "thanksgivingcheckin-99123.firebaseapp.com",
    projectId: "thanksgivingcheckin-99123",
    storageBucket: "thanksgivingcheckin-99123.appspot.com",
    messagingSenderId: "522733393759",
    appId: "1:522733393759:web:356b4092fe36a191a848ea"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const names = [
    "Lalita", "Daniel", "Yassi", "Lance",
    "Mom", "Dad", "Frank", "Maddie",
    "Toby", "Andrea"
  ];

  const peopleList = document.getElementById('peopleList');

  names.forEach(name => {
    const personDiv = document.createElement('div');
    personDiv.classList.add('person');

    const nameSpan = document.createElement('span');
    nameSpan.textContent = name;

    const statusSpan = document.createElement('span');
    statusSpan.classList.add('status');
    statusSpan.textContent = 'Not checked in';

    const checkinBtn = document.createElement('button');
    checkinBtn.textContent = 'Check In';
    checkinBtn.addEventListener('click', async () => {
      await setDoc(doc(db, "checkins", name), { checkedIn: true });
    });

    const checkoutBtn = document.createElement('button');
    checkoutBtn.textContent = 'Check Out';
    checkoutBtn.style.backgroundColor = '#4CAF50'; // green for checkout
    checkoutBtn.style.marginLeft = '10px';
    checkoutBtn.addEventListener('click', async () => {
      await setDoc(doc(db, "checkins", name), { checkedIn: false });
    });

    personDiv.appendChild(nameSpan);
    personDiv.appendChild(statusSpan);
    personDiv.appendChild(checkinBtn);
    personDiv.appendChild(checkoutBtn);
    peopleList.appendChild(personDiv);

    const docRef = doc(db, "checkins", name);
    onSnapshot(docRef, (docSnap) => {
      if (docSnap.exists() && docSnap.data().checkedIn) {
        statusSpan.textContent = 'Checked in';
      } else {
        statusSpan.textContent = 'Not checked in';
      }
    });
  });
</script>
